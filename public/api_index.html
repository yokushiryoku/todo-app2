<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
<script>
  fetch("/api/index", {
    method: "GET",
  })
    .then(response => response.json())
    .then(j => {
      const nearly = j.data.reduce((acc, cur) => {
        return acc + `
<li class='list-group-item list-group-item-action'>
    <a class='text-dark' href='/view?id=${cur.id}'>${cur.posted} ${cur.title}</a>
</li>
`
      }, "");

      const passed = j.data2.reduce((acc, cur) => {
        return acc + `
<li class='list-group-item list-group-item-action'>
    <a class='text-dark' href='/view?id=${cur.id}'>${cur.posted} ${cur.title}</a>
</li>
`
      }, "");
      document.write(`
<!DOCTYPE html>
<html lang='ja'>
<head>
    <meta charset='UTF-8'>
    <title><%= title %></title>
    <link rel ='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css'>
</head>

<body class='container bg-dark'>
<h1 class = 'mt-3 mb-3'>
    ${j.title}
</h1>

<p class='h5 mt-4'>Nearly ToDo</p>
<ol class='list-group'>
${nearly}
</ol>

<p class='h5 mt-4'>Passed ToDo</p>
<ol class='list-group'>
${passed}
</ol>

<hr class='mt-5'>
<div>
    <p class='text-center h6'>4946.page</p>
</div>
</body>
</html>
`);
    });
</script>
</html>
